name: RSS to X

on:
  schedule:
    # 10åˆ†ã”ã¨ã«å®Ÿè¡Œ
    - cron: "*/10 * * * *"
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  rss-to-x:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        # account: [RIDDLE, HIBINO] # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’å¤‰æ›´
        account: [RIDDLE] # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’å¤‰æ›´
    steps:
      - name: Checkout
        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683

      - name: RSS to X (${{ matrix.account }})
        uses: azu/rss-to-twitter@7e20a41d61766ec62ccee5629e964518b33aa87e
        with:
          # RSSãƒ•ã‚£ãƒ¼ãƒ‰ã®URL
          RSS_URL: "https://anchor.fm/s/105812508/podcast/rss"
          # æŠ•ç¨¿ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
          TWEET_TEMPLATE: |
            ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã€Œã‚†ã‚‹ITã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢é“å ´ã€ã§ã€Œ%title%ã€ã‚’å…¬é–‹ã—ã¾ã—ãŸï¼

            ğŸ§ %url%

            #ã‚†ã‚‹IT

          # X APIèªè¨¼æƒ…å ±ï¼ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ï¼‰
          TWITTER_APIKEY: ${{ secrets[format('X_API_KEY_{0}', matrix.account)] }}
          TWITTER_APIKEY_SECRET: ${{ secrets[format('X_API_SECRET_{0}', matrix.account)] }}
          TWITTER_ACCESS_TOKEN: ${{ secrets[format('X_ACCESS_TOKEN_{0}', matrix.account)] }}
          TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets[format('X_ACCESS_TOKEN_SECRET_{0}', matrix.account)] }}
